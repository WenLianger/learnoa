<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:shiro="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>成功页面</title>
    <link th:replace="common/base::static">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

</head>
<body class="layui-layout-body">
    <div class="layui-layout-admin">
        <div class="layui-header">
            <ul class="layui-nav layui-layout-left" lay-filter="appHeadNavFilter" id="headNav">
                <li class="layui-nav-item">
                    <a title="侧边伸缩" id="appFlexible" href="javascript:;">
                        <i id="appLeftNavFlexible" class="layui-icon layui-icon-shrink-right" aria-hidden="true"></i>
                    </a>
                </li>
            </ul>
            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item" lay-unselect="">
                    <a href="javascript:;" data-event="theme">
                        <i class="layui-icon layui-icon-theme"></i>
                    </a>
                </li>
                <li class="layui-nav-item" lay-unselect="">
                    <a href="javascript:;" data-event="fullscreen">
                        <i class="layui-icon layui-icon-screen-full"></i>
                    </a>
                </li>
                <li class="layui-nav-item" >
<!--                    <img th:src="" class="">-->
                    <a href="jsvascript:;">
                        <cite shiro:principal property="realname"></cite>
                        <span class="layui-nav-more"></span>
                    </a>
                    <dl class="layui-nav-child">
                        <dd><a data-event="userInfo" data-menu-id="userInfo"
                               data-menu-url="sys/user/info" href="javascript:;"><cite>基本资料</cite>
                            </a>
                        </dd>
                        <dd><a data-event="changePwd" data-menu-id="changePwd"
                               data-menu-url="sys/user/password" href="javascript:;"><cite>修改密码</cite>
                            </a>
                        </dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;" data-event="logout" title="退出">
                        <i class="fa fa-power-off"></i>
                    </a>
                </li>
                <li class="layui-nav-item layui-hide-sm" lay-unselect="">
                    <a href="javascript:;" data-event="more"><i class="layui-icon layui-icon-more-vertical"></i></a>
                </li>
            </ul>
        </div>
<!--左侧导航-->
        <div class="layui-side layui-side-menu layui-bg-black" id="appLeftNavBox">
            <div class="layui-side-scroll">
                <div class="layui-logo"><span>OADemo</span></div>
                <ul class="layui-nav layui-nav-tree" id="leftNav" lay-filter="appLeftNavFilter"></ul>
            </div>
        </div>
<!--页面标签-->
        <div class="layadmin-pagetabs">
            <div class="layui-icon layadmin-tabs-control layui-icon-prev" data-event="prev"></div>
            <div class="layui-icon layadmin-tabs-control layui-icon-next" data-event="next"></div>
            <div class="layui-tab" lay-filter="appLayoutTabFilter">
                <ul class="layui-tab-title" id="appTabTitle">
                    <li lay-id="0" data-firame-id="appIframe_0" class="layui-this layui-elip">
                        <i class="layui-icon layui-icon-home"></i>
                        <i class="layui-icon layui-unselect layui-tab-close">ဆ</i>
                    </li>
                </ul>
            </div>
        </div>
<!--内容主题区域-->
        <div class="layui-body layui-tab-content" id="appBody">
            <div class="layadmin-tabsbody-item layui-show">
                <iframe class="layadmin-iframe" frameborder="0" id="appIrame_0" th:src="@{/home}"></iframe>
            </div>
        </div>
<!--theme滑出层-->
        <div id="appThemePopup"></div>
        <div id="appThemeContent" class="layui-fluid" style="display: none">
            <div class="layui-card-header">主题配色</div>
            <div class="layui-card-body">
                <ul class="kvf-theme-ul" id="kAppThemeUl">
                    <li class="kvf-theme-li" data-theme="kvf-default-theme">
                        <span class="layui-badge-dot layui-bg-black"></span>
                        <span class="layui-badge-dot" style="background: #ffffff"></span>
                        <span class="layui-badge-dot layui-bg-green"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-l-bisque-theme">
                        <span class="layui-badge-dot" style="background: #292018"></span>
                        <span class="layui-badge-dot" style="background: #ffffff"></span>
                        <span class="layui-badge-dot" style="background: #94785c"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-l-blue-theme">
                        <span class="layui-badge-dot layui-bg-blue"></span>
                        <span class="layui-badge-dot" style="background: #ffffff"></span>
                        <span class="layui-badge-dot layui-bg-blue"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-l-red-theme">
                        <span class="layui-badge-dot"></span>
                        <span class="layui-badge-dot" style="background: #ffffff"></span>
                        <span class="layui-badge-dot"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-l-orange-theme">
                        <span class="layui-badge-dot layui-bg-orange"></span>
                        <span class="layui-badge-dot" style="background: #ffffff"></span>
                        <span class="layui-badge-dot layui-bg-orange"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-green-theme">
                        <span class="layui-badge-dot" style="background: #226A62"></span>
                        <span class="layui-badge-dot" style="background: #2a877b"></span>
                        <span class="layui-badge-dot" style="background: #2a877b"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-blue-theme">
                        <span class="layui-badge-dot" style="background: #0085e8"></span>
                        <span class="layui-badge-dot" style="background: #1e9fff"></span>
                        <span class="layui-badge-dot" style="background: #1e9fff"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-red-theme">
                        <span class="layui-badge-dot layui-bg-black"></span>
                        <span class="layui-badge-dot"></span>
                        <span class="layui-badge-dot"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-black-theme">
                        <span class="layui-badge-dot layui-bg-black"></span>
                        <span class="layui-badge-dot" style="background: #393d49"></span>
                        <span class="layui-badge-dot layui-bg-green"></span>
                    </li>
                    <li class="kvf-theme-li" data-theme="kvf-pink-theme">
                        <span class="layui-badge-dot" style="background: #50314F"></span>
                        <span class="layui-badge-dot" style="background: #50314F"></span>
                        <span class="layui-badge-dot" style="background: #7a4d7b"></span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

<!--<div id = "selectResult">
    <table class="table table-dark table-hover">
        <thead>
        <tr>
            <th>用户ID</th>
            <th>用户名称</th>
            <th>用户密码</th>
            <th>用户权限</th>

            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${userList}">
            <td th:text="${user.getId()}"></td>
            <td th:text="${user.getName()}"></td>
            <td th:text="${user.getPassword()}"></td>
            <td th:text="${user.getRole()}"></td>

            <td>
                <a th:href = "@{/user+{id}(id=${user.getId()})}">修改</a>
                <a th:href = "@{/deleteUser+{id}(id=${user.getId()})}" id = "delete">删除</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div id = "addUser">
    <form name="addUser">
        <div class="form-group">
            <label for="name">name:</label>
            <input type="text" class="form-control" name="name" id="name">
        </div>
        <div class="form-group">
            <label for="pwd">Password:</label>
            <input type="password" class="form-control" name="pwd" id = "pwd">
        </div>
        <div class="form-check">
            <label for="role">role:</label>
            <select class="form-control" name="role" id = "role">
                <option>admin</option>
                <option>user</option>
            </select>
        </div>
        <div class="form-group">
            <label for="img">image:</label>
            <input id="img" type="file" name="img">
        </div>
    </form>
    <button id = "add">AddUser</button>

</div>-->
    <script th:replace="common/base::mainjs"></script>
    <script th:include="common/sys_tpl::headNavTpl" type="text/html" id="headNavTpl"></script>
    <script th:include="common/sys_tpl::leftNavTpl" type="text/html" id="leftNavTpl"></script>
    <script >
        layui.use(['element','layer','laytpl'],function () {
            var element = layui.element, laytpl = layui.laytpl, layer = layui.layer;

            var iframeIdx = $('#appTabTitle').find('li').length;

            // renderTheme();

            // 渲染横向导航菜单栏
            $.ajax({
                type: "GET",
                url: "/index/navMenus",
                success: function (r) {
                    laytpl(headNavTpl.innerHTML).render(r.data,function (html) {
                        var sb=[];
                        sb.push('<li class="layui-nav-item" lay-unselect="">');
                        sb.push('<a title="侧边伸缩test" id="kAppFlexible" href="javascript:;">');
                        sb.push('<i id="kAppLeftNavFlexible" class="layui-icon layui-icon-shrink-right" aria-hidden="true"></i>');
                        sb.push('</a></li>');
                        $('#headNav')[0].innerHTML=sb.join("")+html;
                        element.render('nav','appHeadNavFilter');
                    })
                }
            })

            // 渲染左侧导航栏
            $.ajax({
                type: "GET",
                url: "/index/menus",
                success: function (r) {
                    laytpl(leftNavTpl.innerHTML).render(r.data,function (html) {
                        $('#leftNav')[0].innerHTML=html;
                        element.render('nav','appLeftNavFilter');
                        //默认展开第一个
                        $('#leftNav').find('li:first-child').addClass('layui-nav-itemed');
                    })
                }
            })

            //监听tab切换
            element.on('tab(appLayoutTabFilter)',function () {
                var layid = this.getAttribute('data-iframe-id');
                $('.layadmin-iframe').parent('.layui-show').removeClass('layui-show');
                $('#'+layid).parent().addClass('layui-show');
            })

            //监听左侧导航菜单事件
            element.on('nav(appLeftNavFilter)',function (el) {
                addPage(el);
            })

            function addPage(el) {
                var iframeId = 'appIframe_' + iframeIdx;
                var url = el.attr('data-menu-url');
                var menuId = el.attr('data-menu-id');
                var name = el.find('cite').text();

                if(!menuId){
                    return;
                }
                var appTabTitleEl = $('#appTabTitle');
                var appBodyEl = $('#appBody');
                //取消当前标签页的显示
                appTabTitleEl.find('.layui-this').removeClass('layui-this');
                appBodyEl.find('.layui-show').removeClass('layui-show');
                //显示点击的标签页
                var ltlEl = appTabTitleEl.find('li[lay-id="'+menuId+'"]');
                if(ltlEl.length > 0){
                    ltlEl.addClass('layui-this');
                    var fId = ltlEl.attr('data-iframe-id');
                    $('#'+fId).parent().addClass('layui-show');
                    return;
                }
                //如果点击需要显示的页面不在标签栏里
                var tabTitle = [];
                var content = [];
                tabTitle.push('<li lay-id="' + menuId + '" data-iframe-id="' + iframeId + '" class="layui-this">' + name + '</li>');
                content.push('<div class="layadmin-tabsbody-item layui-show">');
                content.push('<iframe id="' + iframeId + '" src="' + url + '" frameborder="0" class="layadmin-iframe"></iframe>');
                content.push('</div>');

                appTabTitleEl.append(tabTitle.join(""));
                appBodyEl.append(content.join(""));
            }
        });

    //字符串判空方法
    /*function isBlank(str){
        if(str == "" || str == null || str == undefined){
            return true;
        }else {
            return false;
        }
    }*/
    //添加用户js响应事件
    /*$("#add").click(function(){
        var name = document.forms["addUser"]["name"].value;
        var password = document.forms["addUser"]["pwd"].value;
        var role = document.forms["addUser"]["role"].value;
        //判断是否有未填项
        if(isBlank(name) || isBlank(password) || isBlank(role)){
            window.confirm("请完善信息");
        }else {
            var param = {
                "name": name,
                "password": password,
                "role": role
            };
            $.ajax({
                url:"/addUser", //请求url
                data: param,    //请求参数
                async: true,    //是否异步
                success: function f(result) {
                    window.confirm(result.msg); //新增用户成功提示框
                    location.href = "users";    //重新加载界面，同步数据库信息
                }
            });

        }

    });*/
    </script>
</body>
</html>